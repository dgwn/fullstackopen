(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),u=n.n(c),l=n(2),o=n(3),s=n.n(o),m="/api/persons/",i=function(){return s.a.get(m).then((function(e){return e.data}))},f=function(e){return s.a.post(m,e).then((function(e){return e.data}))},d=function(e){return s.a.put(m+e.id,e).then((function(e){return e.data}))},b=function(e){return s.a.delete(m+e).then((function(e){return e.data}))},h=function(e){var t=e.newName,n=e.setNewName,a=e.newNumber,c=e.setNewNumber,u=e.addName;return r.a.createElement("form",{className:"mb-3 w-50"},r.a.createElement("div",null,r.a.createElement("label",{className:"form-label"},"Name:"),r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)},className:"form-control"})),r.a.createElement("div",null,r.a.createElement("label",{className:"form-label"},"Number:"),r.a.createElement("input",{value:a,onChange:function(e){c(e.target.value)},className:"form-control"}),r.a.createElement("div",null),r.a.createElement("button",{type:"submit",class:"btn btn-primary mt-2",onClick:u},"add")))},N=function(e){var t=e.displayNames;return r.a.createElement("ul",{className:"list-group"},t())},p=function(e){var t=e.newSearch,n=e.setNewSearch;return r.a.createElement("form",{className:"mb-3"},r.a.createElement("div",null,"Search:"," ",r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)},className:"form-control w-50"})))},w=function(e){var t=e.message,n=e.messageType;return null===t?null:"success"===n?r.a.createElement("div",{className:"alert alert-success"},t):r.a.createElement("div",{className:"alert alert-danger"},t)},E=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),o=Object(l.a)(u,2),s=o[0],m=o[1],E=Object(a.useState)(""),v=Object(l.a)(E,2),g=v[0],j=v[1],k=Object(a.useState)(""),O=Object(l.a)(k,2),y=O[0],C=O[1],S=Object(a.useState)(null),L=Object(l.a)(S,2),T=L[0],A=L[1],D=Object(a.useState)(null),J=Object(l.a)(D,2),x=J[0],B=J[1];Object(a.useEffect)((function(){i().then((function(e){c(e)}))}),[]);var I=function(){for(var e=0;e<n.length;e++)if(s.toLowerCase()===n[e].name.toLowerCase())return!1;return!0};return r.a.createElement("div",{className:"container w-75"},r.a.createElement("h1",null,"Phonebook"),r.a.createElement(p,{newSearch:y,setNewSearch:C}),r.a.createElement("h2",null,"Add an entry"),r.a.createElement(w,{message:T,messageType:x}),r.a.createElement(h,{checkNames:I,newName:s,setNewName:m,addName:function(e){e.preventDefault();var t={name:s,number:g};if(!0===I())f(t).then((function(e){c(n.concat(e)),B("success"),A("".concat(s," was added to the phonebook.")),m(""),j(""),setTimeout((function(){A(null),B(null)}),2e3)})).catch((function(e){B("error"),A(e.message),setTimeout((function(){A(null),B(null)}),2e3)}));else if(window.confirm('"'.concat(t.name,'" is already in the phonebook. Replace the old number with a new one?'))){var a=n.find((function(e){return e.name.toLowerCase()===s.toLowerCase()})),r={name:t.name,number:g,id:a.id};d(r).then((function(e){c(n.map((function(t){return t.id!==r.id?t:e}))),B("success"),A("".concat(s," was updated.")),m(""),j(""),setTimeout((function(){A(null),B(null)}),2e3)})).catch((function(e){A("".concat(s," was already removed from server.")),setTimeout((function(){A(null)}),2e3)}))}},newNumber:g,setNewNumber:j}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(N,{displayNames:function(){if(""===y)return n.map((function(e){return r.a.createElement("li",{key:e.id,className:"list-group-item"},e.name,": ",e.number," ",r.a.createElement("button",{onClick:function(){return function(e){var t=n.find((function(t){return t.id===e})).id;b(t).then((function(t){c(n.filter((function(t){return t.id!==e}))),A("A name was deleted."),B("success"),setTimeout((function(){A(null),B(null)}),2e3)}))}(e.id)},className:"btn btn-danger btn-sm"},"Delete"))}));for(var e=0;e<n.length;e++){var t=n[e].name.toLowerCase().includes(y);if(!0===n[e].name.toLowerCase().includes(y)&&t)return n.filter((function(e){return e.name.toLowerCase().includes(y)})).map((function(e){return r.a.createElement("li",{key:e.id,className:"list-group-item"},e.name,": ",e.number)}))}return r.a.createElement("li",{className:"list-group-item"},"No such name in the phonebook")}}))};u.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.dd9f9faf.chunk.js.map